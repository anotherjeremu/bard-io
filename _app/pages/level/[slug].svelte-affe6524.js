import{S as e,i as s,s as n,j as r,k as t,e as a,t as o,m as l,n as c,c as u,a as m,d as f,g,b as $,o as i,f as d,E as p,u as h,w as y,x as v,h as w,M as k,O as j,v as S,H as b,V as N,r as T,U as x,Q as E,T as R,N as A}from"../../chunks/vendor-31f7a821.js";import{p as I}from"../../chunks/stores-5108bb92.js";import{N as M,M as L,R as V}from"../../chunks/ReceiveGoldUI-6b15f5f5.js";import{M as B}from"../../chunks/MessageBox-8aabb71c.js";/* empty css                                                        */import{g as C,c as D}from"../../chunks/stores-1f946ea2.js";import{s as H}from"../../chunks/scales-1ee44119.js";function O(e){let s,n;return s=new L({}),{c(){r(s.$$.fragment)},l(e){l(s.$$.fragment,e)},m(e,r){i(s,e,r),n=!0},i(e){n||(v(s.$$.fragment,e),n=!0)},o(e){h(s.$$.fragment,e),n=!1},d(e){S(s,e)}}}function P(e){let s,n,t,o,c;return n=new V({}),{c(){s=a("div"),r(n.$$.fragment)},l(e){s=u(e,"DIV",{});var r=m(s);l(n.$$.fragment,r),r.forEach(f)},m(e,r){d(e,s,r),i(n,s,null),c=!0},i(e){c||(v(n.$$.fragment,e),k((()=>{o&&o.end(1),t||(t=E(s,R,{y:-200,duration:700})),t.start()})),c=!0)},o(e){h(n.$$.fragment,e),t&&t.invalidate(),o=A(s,x,{}),c=!1},d(e){e&&f(s),S(n),e&&o&&o.end()}}}function U(e){let s,n,b,N,E,R,A,I,L,V,C,D,H,U,G=e[3].wonRound+"";s=new B({props:{mood:e[0],noteLetter:e[2].params.slug,message:e[4][e[1]]}}),N=new M({});const Q=[P,O],_=[];function q(e,s){return e[3].wonRound?0:1}return R=q(e),A=_[R]=Q[R](e),C=new B({props:{player:!0,message:"seems like the devs only implemented major chords so far..."}}),C.$on("click",e[5]),{c(){r(s.$$.fragment),n=t(),b=a("section"),r(N.$$.fragment),E=t(),A.c(),L=t(),V=a("div"),r(C.$$.fragment),D=t(),H=o(G),this.h()},l(e){l(s.$$.fragment,e),n=c(e),b=u(e,"SECTION",{class:!0});var r=m(b);l(N.$$.fragment,r),E=c(r),A.l(r),r.forEach(f),L=c(e),V=u(e,"DIV",{class:!0});var t=m(V);l(C.$$.fragment,t),D=c(t),H=g(t,G),t.forEach(f),this.h()},h(){$(b,"class","svelte-157wjgr"),$(V,"class","player-box svelte-157wjgr")},m(e,r){i(s,e,r),d(e,n,r),d(e,b,r),i(N,b,null),p(b,E),_[R].m(b,null),d(e,L,r),d(e,V,r),i(C,V,null),p(V,D),p(V,H),U=!0},p(e,[n]){const r={};1&n&&(r.mood=e[0]),4&n&&(r.noteLetter=e[2].params.slug),2&n&&(r.message=e[4][e[1]]),s.$set(r);let t=R;R=q(e),R!==t&&(T(),h(_[t],1,1,(()=>{_[t]=null})),y(),A=_[R],A||(A=_[R]=Q[R](e),A.c()),v(A,1),A.m(b,null)),(!U||8&n)&&G!==(G=e[3].wonRound+"")&&w(H,G)},i(e){U||(v(s.$$.fragment,e),v(N.$$.fragment,e),v(A),k((()=>{I||(I=j(b,x,{},!0)),I.run(1)})),v(C.$$.fragment,e),U=!0)},o(e){h(s.$$.fragment,e),h(N.$$.fragment,e),h(A),I||(I=j(b,x,{},!1)),I.run(0),h(C.$$.fragment,e),U=!1},d(e){S(s,e),e&&f(n),e&&f(b),S(N),_[R].d(),e&&I&&I.end(),e&&f(L),e&&f(V),S(C)}}}function G(e,s,n){let r,t,a;b(e,I,(e=>n(2,r=e))),b(e,C,(e=>n(3,t=e))),b(e,D,(e=>n(6,a=e)));let o="sad",l=r.params.slug;console.log(l);let c=t.lettersCToB.findIndex((e=>{if(e===l)return!0}));N(C,t.currentScale=H[c].notes,t),N(C,t.currentNoteTypes=H[c].noteTypes,t),console.log(H[c].notes);let u=a[l],m=0;console.log("key is "+c),N(C,t.canPresent=!0,t);return[o,m,r,t,u,()=>{console.log("checking answer..."),console.log("playing chord"),t.enteredHalfTones.forEach(((e,s)=>{new Audio(`../static/sounds/note${e}.wav`).play()})),t.currentNoteTypes;const e=[t.currentScale[0],t.currentScale[2],t.currentScale[4]];t.currentScale[0],t.currentScale[2],t.currentScale[4],console.log("chord needed: "+e),console.log("your chord: "+t.enteredNotes),!function(e,s){if(!Array.isArray(e)||!Array.isArray(s)||e.length!==s.length)return!1;const n=e.concat().sort(),r=s.concat().sort();for(let t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}(e,t.enteredNotes)?n(1,m=2):(n(0,o="happy"),n(1,m=1),N(C,t.gold+=25,t),N(C,t.wonRound=!0,t),N(C,t.canPresent=!1,t),t.completedLetters.push(l))}]}export default class extends e{constructor(e){super(),s(this,e,G,U,n,{})}}
